

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Le langage Java - Les streams" name="description" />
<meta content="Java, programmation objet, POO, langage de programmation, stream, filter, map, reduce" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Streams &mdash; Documentation Fondamentaux Java </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Fondamentaux Java
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Le langage Java</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#l-environnement">L’environnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#oracle-jdk-et-open-jdk">Oracle JDK et Open JDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#un-bref-historique-des-versions">Un bref historique des versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#configuration-d-eclipse">Configuration d’Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#un-premier-programme">Un premier programme</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-compilation">La compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#l-execution">L’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-liaison-dynamique">La liaison dynamique</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#le-classpath">Le classpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#bibliotheques-java-les-fichiers-jar">Bibliothèques Java : les fichiers JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-instructions">Les instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-typage">Le typage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-blocs-de-code">Les blocs de code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-commentaires">Les commentaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-formatage-du-code">Le formatage du code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-conventions-de-nommage">Les conventions de nommage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-mots-cles">Les mots-clés</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#declarer-une-classe">Déclarer une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#anatomie-d-une-classe">Anatomie d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#ajouter-des-methodes">Ajouter des méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#la-methode-main">La méthode main</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-en-ligne-de-commandes">Exécuter le programme en ligne de commandes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-depuis-eclipse">Exécuter le programme depuis Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-booleen-boolean">Le type booléen : boolean</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-caractere-char">Le type caractère : char</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-entiers-byte-short-int-long">Les types entiers : byte, short, int, long</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-a-virgule-flottante-float-double">Les types à virgule flottante : float, double</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-classes-enveloppes">Les classes enveloppes</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#l-autoboxing">L’autoboxing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-d-affectation">L’opérateur d’affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques">Les opérateurs arithmétiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques-unaires">Les opérateurs arithmétiques unaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-de-concatenation-de-chaines">L’opérateur de concaténation de chaînes</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-relationnels">Les opérateurs relationnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-logiques">Les opérateurs logiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-bitwise">Les opérateurs <em>bitwise</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-de-decalage">Les opérateurs de décalage</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#le-transtypage-cast">Le transtypage (cast)</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#operateur-et-assignation">Opérateur et assignation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur">L’opérateur .</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#id1">L’opérateur ,</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#if-else">if-else</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#return">return</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#while">while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#do-while">do-while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for">for</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for-ameliore">for amélioré</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#break-continue">break-continue</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#libelle">libellé</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#switch">switch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#initialisation">Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#creation-avec-new">Création avec new</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#acces-aux-elements-d-un-tableau">Accès aux éléments d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tableau-multi-dimensionnel">Tableau multi-dimensionnel</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-en-chaine-de-caracteres">Conversion en chaîne de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#egalite-de-deux-tableaux">Égalité de deux tableaux</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tri-recherche">Tri &amp; recherche</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#copie-d-un-tableau">Copie d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#typage-d-un-tableau">Typage d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-d-un-tableau-en-liste">Conversion d’un tableau en liste</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-attributs">Les attributs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-portee">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#l-initialisation">L’initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-finaux">attributs finaux</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe">Attributs de classe</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe-finaux">Attributs de classe finaux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-methodes">Les méthodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#id1">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-valeur-de-retour">La valeur de retour</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-parametres">Les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#parametre-final">Paramètre final</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-variables">Les variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#methodes-de-classe">Méthodes de classe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#surcharge-de-methode-overloading">Surcharge de méthode : overloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#portee-des-noms-et-this">Portée des noms et this</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#principe-d-encapsulation">Principe d’encapsulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-constructeur">Le constructeur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#parametres-de-constructeur">Paramètres de constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#valeur-par-defaut-des-attributs">Valeur par défaut des attributs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#constructeur-par-defaut">Constructeur par défaut</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#constructeur-prive">Constructeur privé</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#appel-d-un-constructeur-dans-un-constructeur">Appel d’un constructeur dans un constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#appel-d-une-methode-dans-un-constructeur">Appel d’une méthode dans un constructeur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#injection-de-dependances-par-le-constructeur">Injection de dépendances par le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-bloc-d-initialisation">Le bloc d’initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-bloc-d-initialisation-de-classe">Le bloc d’initialisation de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#memoire-heap-et-stack">Mémoire heap et stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-ramasse-miettes">Le ramasse-miettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#la-methode-finalize">La méthode finalize</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="package.html#declaration-d-un-package">Déclaration d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#sous-package">Sous package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-d-un-package">Nom d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-complet-d-une-classe">Nom complet d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#import-de-noms">Import de noms</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#la-portee-de-niveau-package">La portée de niveau package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#le-fichier-package-info-java">Le fichier package-info.java</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="heritage_composition.html">Héritage et composition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#l-heritage-is-a">L’héritage (is-a)</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-constructeur">Héritage et constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-simple-object">Héritage simple : Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-affectation">Héritage et affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#le-mot-cle-instanceof">Le mot-clé instanceof</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-portee-protected">La portée protected</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-des-methodes-et-attributs-de-classe">Héritage des méthodes et attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-final">Héritage et final</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-composition-has-a">La composition (has-a)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#principe-du-polymorphisme">Principe du polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#une-exception-les-methodes-privees">Une exception : les méthodes privées</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#redefinition-et-signature-de-methode">Redéfinition et signature de méthode</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-mot-cle-super">Le mot-clé super</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#l-annotation-override">L’annotation &#64;Override</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#les-methodes-de-classe">Les méthodes de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#methode-finale">Méthode finale</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#constructeur-et-polymorphisme">Constructeur et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#masquage-des-attributs-par-heritage">Masquage des attributs par héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-principe-du-ouvert-ferme">Le principe du ouvert/fermé</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-classe-abstraite">Déclarer une classe abstraite</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-methode-abstraite">Déclarer une méthode abstraite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-equals">La méthode equals</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-hashcode">La méthode hashCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-tostring">La méthode toString</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-finalize">La méthode finalize</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-clone">La méthode clone</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-getclass">La méthode getClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#les-methodes-de-concurrence">Les méthodes de concurrence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#string-et-tableau-de-caracteres">String et tableau de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#quelques-methodes-utilitaires">Quelques méthodes utilitaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#construction-d-une-instance-de-string">Construction d’une instance de String</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#immutabilite-des-chaines-de-caracteres">Immutabilité des chaînes de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#la-classe-stringbuilder">La classe StringBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#formatage-de-texte">Formatage de texte</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#les-expressions-regulieres">Les expressions régulières</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interface.html#declaration-d-une-interface">Déclaration d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-d-une-interface">Implémentation d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#attributs-et-methodes-statiques">Attributs et méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#heritage-d-interface">Héritage d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#les-interfaces-marqueurs">Les interfaces marqueurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-par-defaut">Implémentation par défaut</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#la-segregation-d-interface">La ségrégation d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#l-inversion-de-dependance">L’inversion de dépendance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#l-exemple-de-la-classe-arraylist">L’exemple de la classe ArrayList</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#creation-et-assignation-d-une-classe-generique">Création et assignation d’une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#notation-en-diamant">Notation en diamant</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#substitution-et-type-generique">Substitution et type générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-methode-generique">Écrire une méthode générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-classe-generique">Écrire une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-listes">Les listes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraylist">La classe ArrayList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedlist">La classe LinkedList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraydeque">La classe ArrayDeque</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-priorityqueue">La classe PriorityQueue</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-vector-et-stack">Les classes Vector et Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-listes">Les interfaces pour les listes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-ensembles-set">Les ensembles (set)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treeset">La classe TreeSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashset">La classe HashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashset">La classe LinkedHashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-ensembles">Les interfaces pour les ensembles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#copie-d-une-collection-dans-un-tableau">Copie d’une collection dans un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-tableaux-associatifs-maps">Les tableaux associatifs (maps)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treemap">La classe TreeMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashmap">La classe HashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashmap">La classe LinkedHashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-dictionary-et-hashtable">Les classes Dictionary et Hashtable</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-tableaux-associatifs">Les interfaces pour les tableaux associatifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#la-classe-outil-collections">La classe outil Collections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#qu-est-ce-qu-une-exception">Qu’est-ce qu’une exception ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#signaler-une-exception">Signaler une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#traiter-une-exception">Traiter une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#propagation-d-une-exception">Propagation d’une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exceptions-et-polymorphisme">Exceptions et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-bloc-finally">Le bloc finally</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-try-with-resources">Le try-with-resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#hierarchie-applicative-d-exception">Hiérarchie applicative d’exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exception-cause">Exception cause</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#les-erreurs-et-les-exceptions-runtime">Les erreurs et les exceptions runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#choix-entre-checked-et-unchecked">Choix entre checked et unchecked</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#inputstream-et-classes-concretes">InputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#outputstream-et-classes-concretes">OutputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#flux-orientes-caracteres">Flux orientés caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#reader-et-classes-concretes">Reader et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#writer-et-classes-concretes">Writer et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#les-decorateurs-de-flux">Les décorateurs de flux</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-classe-scanner">La classe Scanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#fichiers-et-chemins">Fichiers et chemins</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#acces-au-reseau">Accès au réseau</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-serialisation-d-objets">La sérialisation d’objets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#donnee-transient">Donnée transient</a></li>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#identifiant-de-version-de-serialisation">Identifiant de version de sérialisation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Fondamentaux Java</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Accueil</a> &raquo;</li>
        
      <li>Streams</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="streams">
<h1>Streams<a class="headerlink" href="#streams" title="Lien permanent vers ce titre">¶</a></h1>
<p>L’API <em>streams</em> a été introduite avec Java 8 pour permettre la programmation
fonctionnelle. Un <em>stream</em> (flux) est une représentation d’une séquence
sur laquelle il est possible d’appliquer des opérations. Cette API a deux
principales intérêts :</p>
<ol class="arabic simple">
<li><p>Elle permet d’effectuer les opérations sur une séquence sans utiliser de
structure de boucle. Cela permet de réaliser des traitements complexes tout
en maintenant une bonne lisibilité du code.</p></li>
<li><p>Les opérations sur les <em>streams</em> sont réalisées en flux (d’où leur nom) ce qui
limite l’empreinte mémoire nécessaire. Il est même possible de réaliser très
simplement des traitements en parallèle pour tirer partie des possibilités
d’une processeur multi-cœurs ou d’une machine multi-processeurs.</p></li>
</ol>
<div class="section" id="creation-d-un-stream">
<h2>Création d’un stream<a class="headerlink" href="#creation-d-un-stream" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un <em>stream</em> est représenté par une instance de l’interface générique <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a>.
On peut créer un <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a> en utilisant un objet de type <a class="reference external" href="https://en.wikipedia.org/wiki/Builder_pattern">builder</a></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Hello&quot;</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;World&quot;</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>Il existe également des interfaces filles de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a> pour certains types primitifs :
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html">IntStream</a>, <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/LongStream.html">LongStream</a> et <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/DoubleStream.html">DoubleStream</a>. On peut créer des <em>streams</em> de ces
types soit à partir d’une liste de valeurs soit en donnant les limites d’un intervalle.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="n">IntStream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">579</span><span class="o">);</span>

<span class="n">IntStream</span> <span class="n">rangeIntStream</span> <span class="o">=</span> <span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1_000_000_000</span><span class="o">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comme mentionné à la section précédente, un des intérêts des <em>streams</em> vient de
leur nature même de flux. Ainsi dans l’exemple précédent, la création d’un <em>stream</em>
à partir d’un intervalle ne crée pas une valeur pour chaque élément. Ainsi la création
d’un <em>stream</em> sur un intervalle d’un milliard est instantanée et ne prend
presque aucune place en mémoire.</p>
</div>
<p>Il est même possible de créer un <em>stream</em> « infini » dont les valeurs sont calculées
par une lambda.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Un stream commençant à la valeur 1 et qui est représenté par la suite n = n + 1</span>
<span class="n">LongStream</span> <span class="n">longStream</span> <span class="o">=</span> <span class="n">LongStream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
</pre></div>
</div>
<p>Il est également possible de créer un <em>stream</em> à partir d’un tableau grâce aux méthodes
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-">Arrays.stream</a> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="o">[]</span> <span class="n">tableau</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span> <span class="o">};</span>
<span class="n">IntStream</span> <span class="n">tableauStream</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">tableau</span><span class="o">);</span>
</pre></div>
</div>
<p>Les collections peuvent également être utilisées sous la forme d’un <em>stream</em> car
l’interface <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html">Collection</a> définit la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#stream--">Collection.stream</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">liste</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Hello&quot;</span><span class="o">);</span>
<span class="n">liste</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;World&quot;</span><span class="o">);</span>

<span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
</pre></div>
</div>
<p>Le contenu d’un fichier texte peut aussi être parcouru sous la forme d’un <em>stream</em>
de chacune de ses lignes grâce à la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-">Files.lines</a> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span> <span class="n">fichier</span> <span class="o">=</span> <span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;fichier.txt&quot;</span><span class="o">);</span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">linesStream</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">lines</span><span class="o">(</span><span class="n">fichier</span><span class="o">);</span>
</pre></div>
</div>
<p>Ainsi, toutes les opérations qui impliquent une séquence d’éléments peuvent être
traitées sous la forme d’un <em>stream</em>.</p>
<p>Il est possible de réaliser un traitement sur chaque élément du <em>stream</em>
grâce à la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-">Stream.forEach</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Affiche les chiffres de 10 jusqu&#39;à 0</span>
<span class="n">IntStream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">11</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></div>
</div>
<p>Un <em>stream</em> est également utilisé pour produire un résultat unique ou une
collection. Dans le premier cas, on dit que l’on réduit, tandis que dans le
second cas, on dit que l’on collecte.</p>
</div>
<div class="section" id="la-reduction">
<h2>La réduction<a class="headerlink" href="#la-reduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>La réduction consiste à obtenir un résultat unique à partir d’un <em>stream</em>.
On peut par exemple compter le nombre d’éléments. Si le <em>stream</em> est composé
de nombres, on peut réaliser une réduction mathématique en calculant la somme,
la moyenne ou en demandant la valeur minimale ou maximale…</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span> <span class="n">resultat</span> <span class="o">=</span> <span class="n">LongStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">50</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultat</span><span class="o">);</span>

<span class="n">OptionalDouble</span> <span class="n">moyenne</span> <span class="o">=</span> <span class="n">LongStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">50</span><span class="o">).</span><span class="na">average</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">moyenne</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">moyenne</span><span class="o">.</span><span class="na">getAsDouble</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</div>
<p>L’API <em>streams</em> introduit la notion de <em>Optional</em>. Certaines opérations de réduction
peuvent ne pas être possibles. Par exemple, le calcul de la moyenne n’est pas possible
si le <em>stream</em> ne contient aucun élément. La méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--">average</a> qui permet de calculer
la moyenne d’un <em>stream</em> numérique retourne donc un <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/OptionalDouble.html">OptionalDouble</a> qui permet
de représenter soit le résultat, soit le fait qu’il n’y a pas de résultat.
On peut appeler la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/OptionalDouble.html#isPresent--">OptionalDouble.isPresent</a> pour s’assurer qu’il existe
un résultat pour cette réduction.</p>
<p>Pour les streams de tout type, il est possible de réaliser une réduction à partir
d’une lambda grâce à la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#reduce-int-java.util.function.IntBinaryOperator-">Stream.reduce</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&quot;une chaine&quot;</span><span class="o">,</span> <span class="s">&quot;une autre chaine&quot;</span><span class="o">,</span> <span class="s">&quot;encore une chaine&quot;</span><span class="o">);</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">chaineLaPlusLongue</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">((</span><span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">s1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">s2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">s1</span> <span class="o">:</span> <span class="n">s2</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">chaineLaPlusLongue</span><span class="o">.</span><span class="na">get</span><span class="o">());</span> <span class="c1">// &quot;encore une chaine&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="la-collecte">
<h2>La collecte<a class="headerlink" href="#la-collecte" title="Lien permanent vers ce titre">¶</a></h2>
<p>La collecte permet de créer un nouvelle collection à partir d’un stream. Pour
cela, il faut fournir une implémentation de l’interface <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html">Collector</a>. Cette interface
est assez complexe, heureusement la classe outil <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html">Collectors</a> fournit des méthodes
pour générer une instance de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html">Collector</a>. Pour réaliser la collecte, il faut
appeler la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-">Stream.collect</a>.</p>
<p>On peut ainsi collecter les éléments d’un <em>stream</em> sous la forme d’une <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html">List</a>, d’un
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html">Set</a> ou de tout type de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html">Collection</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&quot;une chaine&quot;</span><span class="o">,</span> <span class="s">&quot;une autre chaine&quot;</span><span class="o">,</span> <span class="s">&quot;encore une chaine&quot;</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">autreListe</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</pre></div>
</div>
<p>L’exemple précédent peut sembler trivial puisqu’au final, ce code crée un copie
de la liste d’origine. Son intérêt deviendra évident lorsque nous appliquerons
des opérations de filtre ou de mapping sur un <em>stream</em>.</p>
<p>Un <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html">Collector</a> peut également réaliser un opération de regroupement pour créer
des <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html">Map</a>. Si on dispose de la classe <em>Voiture</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.formation</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMarque</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Alors il devient facile de grouper des instances d’une liste de <em>Voiture</em> selon
leur marque.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Voiture</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;renault&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;audi&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">));</span>

<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Voiture</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">Voiture</span><span class="o">::</span><span class="n">getMarque</span><span class="o">));</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">).</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 2</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;renault&quot;</span><span class="o">).</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 1</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;audi&quot;</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>    <span class="c1">// 1</span>
</pre></div>
</div>
<p>On peut également créer une chaîne de caractères en joignant les éléments d’un
<em>stream</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&quot;un&quot;</span><span class="o">,</span> <span class="s">&quot;deux&quot;</span><span class="o">,</span> <span class="s">&quot;trois&quot;</span><span class="o">,</span> <span class="s">&quot;quatre&quot;</span><span class="o">,</span> <span class="s">&quot;cinq&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultat</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&quot;, &quot;</span><span class="o">));</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultat</span><span class="o">);</span> <span class="c1">// &quot;un, deux, trois, quatre, cinq&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="le-filtrage">
<h2>Le filtrage<a class="headerlink" href="#le-filtrage" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une opération courante sur un <em>stream</em> consiste à appliquer un filtre pour
éliminer une partie de ses éléments. Pour, cela on peut utiliser
la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-">Stream.filter</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Voiture</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;audi&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">));</span>

<span class="c1">// on construit la liste des voitures qui ne sont pas de marque &quot;citroen&quot;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Voiture</span><span class="o">&gt;</span> <span class="n">sansCitroen</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                                 <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="o">!</span><span class="n">v</span><span class="o">.</span><span class="na">getMarque</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">))</span>
                                 <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sansCitroen</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 1</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// On affiche les 500 premiers nombres qui ne sont pas divisibles par 7</span>
<span class="n">IntStream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
         <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
         <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>
         <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></div>
</div>
<p>La méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-">Stream.filter</a> peut accepter une lambda qui reçoit en paramètre
un élément du <em>stream</em> et qui retourne un <strong>boolean</strong> (<strong>true</strong> signifie
que l’élément doit être conservé dans le <em>stream</em>). On peut bien évidemment chaîner
les appels à la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-">Stream.filter</a> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// On affiche les 500 premiers nombres qui ne sont pas divisibles par 7</span>
<span class="c1">// et qui sont impairs</span>
<span class="n">IntStream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
         <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
         <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
         <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>
         <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="le-mapping">
<h2>Le mapping<a class="headerlink" href="#le-mapping" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le mapping est une opération qui permet de transformer la nature du <em>stream</em>
afin de passer d’un type à un autre.</p>
<p>Par exemple, si nous voulons récupérer l’ensemble des marques distinctes d’une
liste de <em>Voiture</em>, nous pouvons utiliser un mapping pour passer d’un <em>stream</em>
de <em>Voiture</em> à un <em>stream</em> de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html">String</a> (représentant les marques des voitures).</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Voiture</span><span class="o">&gt;</span> <span class="n">liste</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;audi&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;renault&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;volkswagen&quot;</span><span class="o">),</span>
                                    <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;citroen&quot;</span><span class="o">));</span>

<span class="c1">// mapping du stream de voiture en stream de String</span>
<span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">marques</span> <span class="o">=</span> <span class="n">liste</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                           <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">Voiture</span><span class="o">::</span><span class="n">getMarque</span><span class="o">)</span>
                           <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">marques</span><span class="o">);</span> <span class="c1">// [&quot;audi&quot;, &quot;citroen&quot;, &quot;renault&quot;, &quot;volkswagen&quot;]</span>
</pre></div>
</div>
<p>Pour réaliser un mapping vers un type primitif, il faut utiliser les méthodes
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-">Stream.mapToInt</a>, <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToLong-java.util.function.ToLongFunction-">Stream.mapToLong</a> ou <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToDouble-java.util.function.ToDoubleFunction-">Stream.mapToDouble</a>. On peut également
utiliser ces méthodes pour convertir un <em>stream</em> contenant un type primitif
vers un <em>stream</em> contenant un autre type primitif.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Affichage de la racine carré des 100 premiers entiers</span>
<span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">101</span><span class="o">)</span>
         <span class="o">.</span><span class="na">mapToDouble</span><span class="o">(</span><span class="n">Math</span><span class="o">::</span><span class="n">sqrt</span><span class="o">)</span>
         <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></div>
</div>
<p>Pour la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-">Stream.map</a>, le type de retour de la lambda ou de la référence de
méthode indique le nouveau type du <em>stream</em>.</p>
</div>
<div class="section" id="le-parallelisme">
<h2>Le parallélisme<a class="headerlink" href="#le-parallelisme" title="Lien permanent vers ce titre">¶</a></h2>
<p>Afin de tirer profit des processeurs multi-cœurs et des machines multi-processeurs,
les opérations sur les <em>streams</em> peuvent être exécutées en parallèle. À partir d’une <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html">Collection</a>, il
suffit d’appeler la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#parallelStream--">Collection.parallelStream</a> ou à partir d’un <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a>,
il suffit d’appeler la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#parallel--">BaseStream.parallel</a>.</p>
<p>Un <em>stream</em> en parallèle découpe le flux pour assigner l’exécution à différents
processeurs et recombine ensuite le résultat à la fin. Cela signifie que les
traitements sur le <em>stream</em> ne doivent pas être dépendant de l’ordre d’exécution.</p>
<p>Par exemple, si vous utilisez un <em>stream</em> parallèle pour afficher les 100 premiers
entiers, vous constaterez que la sortie du programme est imprédictible.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// affiche les 100 premiers entiers sur la console en utilisant un stream parallèle.</span>
<span class="c1">// Ceci n&#39;est pas une bonne idée car l&#39;opération d&#39;affichage implique</span>
<span class="c1">// que le stream est parcouru séquentiellement. Or un stream parallèle</span>
<span class="c1">// est réparti sur plusieurs processeurs et donc l&#39;ordre d&#39;exécution</span>
<span class="c1">// n&#39;est pas prédictible</span>
<span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">101</span><span class="o">).</span><span class="na">parallel</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></div>
</div>
<p>Par contre, les streams parallèles peuvent être utiles pour des réductions de type
somme puisque le calcul peut être réparti en sommes intermédiaires avant de réaliser
la somme totale.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright David Gayerie - dagaydevel at free.fr - CC-BY-SA

    </p>
  </div>
    <div>Téléchargez ce support au format <a class="reference download" href="https://github.com/spoonless/technowide_java/archive/gh-pages.zip">HTML</a>
    ou au format <a class="reference download" href="https://github.com/spoonless/technowide_java/raw/pdf/Fondamentaux_Java.pdf">PDF</a>
    </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>